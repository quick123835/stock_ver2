(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[183],{9547:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/category",function(){return c(2705)}])},960:function(a,b,c){"use strict";var d=c(5893),e=c(1801),f=c.n(e),g=c(387);c(8418);var h=c(9473),i=c(7983),j=f().card,k=f().cardName,l=f().counts,m=f().red;b.Z=function(a){var b=a.item,c=a.stocks,e=a.onStockClick,f=(0,g.useRouter)(),n=f.pathname,o=(0,h.I0)(),p=function(a,b){o((0,i.jc)(a)),o((0,i.$g)(b)),f.push("/category")};if("/"===n){var q=c.filter(function(a){return a.industry_category===b});return(0,d.jsxs)("div",{className:j,onClick:function(){p(b,q)},children:[(0,d.jsx)("div",{className:k,children:b}),(0,d.jsxs)("div",{className:l,children:[q.length,"檔股票"]})]})}if("/category"===n&&b.pressure&&b.pressure.length>0){var r=new Date(b.pressure[0]),s=r.getFullYear(),t=(r.getMonth()+1).toString().padStart(2,"0"),u=r.getDate().toString().padStart(2,"0"),v="".concat(s,"/").concat(t,"/").concat(u),w=Number(b.pressure[1]).toFixed(4);return(0,d.jsxs)("div",{className:"".concat(j," ").concat(w<=0.6&&m," "),onClick:function(){null==e||e(b.id,b.name)},children:[(0,d.jsx)("div",{className:k,children:b.name}),(0,d.jsxs)("div",{children:["代碼: ",b.id]}),(0,d.jsxs)("div",{children:["時間: ",v]}),(0,d.jsxs)("div",{children:["力道: ",w]})]})}}},7983:function(a,b,c){"use strict";c.d(b,{qu:function(){return d},vp:function(){return e},GB:function(){return f},jc:function(){return g},"$g":function(){return h}});var d=function(a){return{type:"getTtlStocks",payload:a}},e=function(a){return{type:"getTtlCategories",payload:a}},f=function(a){return{type:"StockInfo",payload:a}},g=function(a){return{type:"categoryClick",payload:a}},h=function(a){return{type:"clickCategoryStocks",payload:a}}},8418:function(a,b,c){"use strict";var d;(d=c(7294))&&d.__esModule,c(6273),c(387),c(7190)},7190:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useIntersection=function(a){var b,c=a.rootMargin,h=a.disabled||!f,i=d.useRef(),j=function(a){if(Array.isArray(a))return a}(b=d.useState(!1))||function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h.return||h.return()}finally{if(e)throw f}}return c}(b,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),k=j[0],l=j[1],m=d.useCallback(function(a){i.current&&(i.current(),i.current=void 0),!h&&!k&&a&&a.tagName&&(i.current=g(a,function(a){return a&&l(a)},{rootMargin:c}))},[h,c,k]);return d.useEffect(function(){if(!f&&!k){var a=e.requestIdleCallback(function(){return l(!0)});return function(){return e.cancelIdleCallback(a)}}},[k]),[m,k]};var d=c(7294),e=c(9311),f="undefined"!=typeof IntersectionObserver;function g(a,b,c){var d=i(c),e=d.id,f=d.observer,g=d.elements;return g.set(a,b),f.observe(a),function(){g.delete(a),f.unobserve(a),0===g.size&&(f.disconnect(),h.delete(e))}}var h=new Map();function i(a){var b=a.rootMargin||"",c=h.get(b);if(c)return c;var d=new Map(),e=new IntersectionObserver(function(a){a.forEach(function(a){var b=d.get(a.target),c=a.isIntersecting||a.intersectionRatio>0;b&&c&&b(c)})},a);return h.set(b,c={id:b,observer:e,elements:d}),c}},2705:function(a,b,c){"use strict";c.r(b),c.d(b,{"default":function(){return p}});var d=c(5666),e=c.n(d),f=c(5893),g=c(960),h=c(9473),i=c(7294),j=c(387),k=c(1907),l=c(7983),m=function(a){for(var b=1;b<a.length;b++){var c=a[b].close,d=a[b-1].close,e=c-d;a[b].def=e}for(var f=[],g=[],h=[],i=[],j=[],k=[],l=1;l<a.length;l++)a[l].def<0?(f.push(a[l].Trading_Volume),g.push(a[l].date),h.push(Math.abs(a[l].open-a[l-1].close)),i.push(Math.abs(a[l].max-a[l].min)),j.push(Math.abs(a[l].open-a[l].min)),k.push(Math.abs(a[l].max-a[l].close))):(g.push(a[l].date),f.push(a[l].Trading_Volume),h.push(Math.abs(a[l].max-a[l].open)),i.push(Math.abs(a[l].close-a[l].min)),j.push(Math.abs(a[l-1].close-a[l].open)),k.push(Math.abs(a[l-1].max-a[l].min)));for(var m=[],n=[],o=0;o<h.length;o++)m.push(h[o]+i[o]),n.push(j[o]+k[o]);for(var p=[],q=[],r=0;r<m.length;r++)p.push(Math.floor(f[r]*(m[r]/(m[r]+n[r])))),q.push(Math.floor(f[r]*(n[r]/(m[r]+n[r]))));for(var s=g.slice(20),t=[],u=[],v=0;v<p.length-20;v++){for(var w=0,x=0,y=v;y<v+20;y++)w+=p[y],x+=q[y];t.push(w),u.push(x)}for(var z=[],A=0;A<t.length;A++)z.push([new Date(s[A]).getTime(),u[A]/t[A]]);return z[z.length-1]};function n(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}h.done?b(i):Promise.resolve(i).then(d,e)}function o(a){return(function(a){if(Array.isArray(a)){for(var b=0,c=new Array(a.length);b<a.length;b++)c[b]=a[b];return c}})(a)||(function(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)})(a)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance")})()}var p=function(){var a=(0,h.I0)();(0,h.v9)(function(a){return a.clickCategoryReducer});var b=(0,h.v9)(function(a){return a.clickCategoryStocksReducer});(0,h.v9)(function(a){return a.getStockInfoReducer});var c=(0,i.useState)(!0),d=c[0],p=c[1],q=(0,i.useState)([]),r=q[0],s=q[1],t=(0,i.useState)([]);t[0],t[1];var u=(0,j.useRouter)(),v=function(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){n(f,d,e,g,h,"next",a)}function h(a){n(f,d,e,g,h,"throw",a)}g(void 0)})}}(e().mark(function b(c){var d,f,g;return e().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.prev=0,b.next=3,(0,k.j)(c.stock_id);case 3:(d=b.sent)&&(a((0,l.GB)(d)),f=m(d),0==(g=r.filter(function(a){return a.id===c.stock_id})).length&&s(function(a){return o(a).concat([{name:c.stock_name,id:c.stock_id,pressure:f}])})),b.next=10;break;case 7:b.prev=7,b.t0=b.catch(0),console.log(b.t0);case 10:case"end":return b.stop()}},b,null,[[0,7]])})),w=function(a,b){u.push({pathname:"/stock",query:{id:a,name:b}})};return(0,i.useEffect)(function(){var a=b.map(function(a){return v(a)});Promise.all(a).then(function(){p(!1)}).catch(function(a){console.error(a),p(!1)})},[b]),(0,f.jsxs)(f.Fragment,{children:[!0===d&&(0,f.jsx)("div",{className:"position-absolute w-100 h-100 d-flex justify-content-center align-items-center",children:"一鍵力道計算中..."}),!1===d&&(0,f.jsx)("div",{style:{marginTop:"65px",display:"flex",flexWrap:"wrap",gap:"12PX",overflowY:"scroll",justifyContent:"center"},children:r.map(function(a,b){return(0,f.jsx)(g.Z,{item:a,onStockClick:w},b)})})]})}},1801:function(a){a.exports={card:"ListItem_card__jqs9j",cardName:"ListItem_cardName__3tcdo",counts:"ListItem_counts__gWOfl",red:"ListItem_red__3be1z"}}},function(a){a.O(0,[774,888,179],function(){return a(a.s=9547)}),_N_E=a.O()}])