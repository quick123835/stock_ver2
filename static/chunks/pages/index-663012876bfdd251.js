(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(666)}])},960:function(a,b,c){"use strict";var d=c(5893),e=c(1801),f=c.n(e),g=c(387);c(8418);var h=c(9473),i=c(7983),j=f().card,k=f().cardName,l=f().counts,m=f().red;b.Z=function(a){var b=a.item,c=a.stocks,e=a.onStockClick,f=(0,g.useRouter)(),n=f.pathname,o=(0,h.I0)(),p=function(a,b){o((0,i.jc)(a)),o((0,i.$g)(b)),f.push("/category")};if("/"===n){var q=c.filter(function(a){return a.industry_category===b});return(0,d.jsxs)("div",{className:j,onClick:function(){p(b,q)},children:[(0,d.jsx)("div",{className:k,children:b}),(0,d.jsxs)("div",{className:l,children:[q.length,"檔股票"]})]})}if("/category"===n&&b.pressure&&b.pressure.length>0){var r=new Date(b.pressure[0]),s=r.getFullYear(),t=(r.getMonth()+1).toString().padStart(2,"0"),u=r.getDate().toString().padStart(2,"0"),v="".concat(s,"/").concat(t,"/").concat(u),w=Number(b.pressure[1]).toFixed(4);return(0,d.jsxs)("div",{className:"".concat(j," ").concat(w<=0.6&&m," "),onClick:function(){null==e||e(b.id,b.name)},children:[(0,d.jsx)("div",{className:k,children:b.name}),(0,d.jsxs)("div",{children:["代碼: ",b.id]}),(0,d.jsxs)("div",{children:["時間: ",v]}),(0,d.jsxs)("div",{children:["力道: ",w]})]})}}},7983:function(a,b,c){"use strict";c.d(b,{qu:function(){return d},vp:function(){return e},GB:function(){return f},jc:function(){return g},"$g":function(){return h}});var d=function(a){return{type:"getTtlStocks",payload:a}},e=function(a){return{type:"getTtlCategories",payload:a}},f=function(a){return{type:"StockInfo",payload:a}},g=function(a){return{type:"categoryClick",payload:a}},h=function(a){return{type:"clickCategoryStocks",payload:a}}},8418:function(a,b,c){"use strict";var d;(d=c(7294))&&d.__esModule,c(6273),c(387),c(7190)},7190:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.useIntersection=function(a){var b,c=a.rootMargin,h=a.disabled||!f,i=d.useRef(),j=function(a){if(Array.isArray(a))return a}(b=d.useState(!1))||function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h.return||h.return()}finally{if(e)throw f}}return c}(b,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}(),k=j[0],l=j[1],m=d.useCallback(function(a){i.current&&(i.current(),i.current=void 0),!h&&!k&&a&&a.tagName&&(i.current=g(a,function(a){return a&&l(a)},{rootMargin:c}))},[h,c,k]);return d.useEffect(function(){if(!f&&!k){var a=e.requestIdleCallback(function(){return l(!0)});return function(){return e.cancelIdleCallback(a)}}},[k]),[m,k]};var d=c(7294),e=c(9311),f="undefined"!=typeof IntersectionObserver;function g(a,b,c){var d=i(c),e=d.id,f=d.observer,g=d.elements;return g.set(a,b),f.observe(a),function(){g.delete(a),f.unobserve(a),0===g.size&&(f.disconnect(),h.delete(e))}}var h=new Map();function i(a){var b=a.rootMargin||"",c=h.get(b);if(c)return c;var d=new Map(),e=new IntersectionObserver(function(a){a.forEach(function(a){var b=d.get(a.target),c=a.isIntersecting||a.intersectionRatio>0;b&&c&&b(c)})},a);return h.set(b,c={id:b,observer:e,elements:d}),c}},666:function(a,b,c){"use strict";c.r(b),c.d(b,{"default":function(){return q}});var d=c(5666),e=c.n(d),f=c(5893),g=c(1907),h=c(7294),i=c(9473),j=c(6286),k=c.n(j),l=c(960);c(387);var m=k().listContainer,n=function(a){var b=a.categories,c=a.ttlStocks;return(0,f.jsx)("div",{className:m,children:b.map(function(a,b){return(0,f.jsx)(l.Z,{item:a,stocks:c},b)})})},o=c(7983);function p(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}h.done?b(i):Promise.resolve(i).then(d,e)}var q=function(){var a=(0,h.useState)(!0),b=a[0],c=a[1],d=(0,h.useState)({});d[0],d[1];var j=(0,i.I0)(),k=function(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){p(f,d,e,g,h,"next",a)}function h(a){p(f,d,e,g,h,"throw",a)}g(void 0)})}}(e().mark(function a(){var b,d,f,h;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,g.W)();case 3:d=(b=a.sent.data).filter(function(a){return"ETF"!==a.industry_category&&"Index"!==a.industry_category&&"上櫃指數股票型基金(ETF)"!==a.industry_category&&"ETN"!==a.industry_category&&"指數投資證券(ETN)"!==a.industry_category&&"受益證券"!==a.industry_category}),f=Array.from(new Map(d.map(function(a){return[a.stock_id,a]})).values()),j((0,o.qu)(f)),h=f.reduce(function(a,b){return a.includes(b.industry_category)||a.push(b.industry_category),a},[]),j((0,o.vp)(h)),c(!1),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),console.error(a.t0);case 15:case"end":return a.stop()}},a,null,[[0,12]])}));(0,h.useEffect)(function(){k()},[]);var l=(0,i.v9)(function(a){return a.getTtlStocksReducer}),m=(0,i.v9)(function(a){return a.getTtlCategoriesReducer});return(0,f.jsxs)("div",{children:[!0===b&&(0,f.jsx)("div",{className:"position-absolute w-100 h-100 d-flex justify-content-center align-items-center",children:"Loading..."}),!1===b&&(0,f.jsx)(n,{categories:m,ttlStocks:l})]})}},6286:function(a){a.exports={listContainer:"CategoriesList_listContainer__2ifrD",card:"CategoriesList_card__3_XO2",cardName:"CategoriesList_cardName__2-zBf",counts:"CategoriesList_counts__1whUa"}},1801:function(a){a.exports={card:"ListItem_card__jqs9j",cardName:"ListItem_cardName__3tcdo",counts:"ListItem_counts__gWOfl",red:"ListItem_red__3be1z"}}},function(a){a.O(0,[774,888,179],function(){return a(a.s=8581)}),_N_E=a.O()}])